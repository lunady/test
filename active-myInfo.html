<!DOCTYPE html>
<html>
<head>
	<title>我的资料</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="" name="description"/>
<meta content="" name="author"/>
<meta name="MobileOptimized" content="320">
<!-- BEGIN GLOBAL MANDATORY STYLES -->
<link href="./css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="./css/common.css" rel="stylesheet" type="text/css"/>
	
</head>
<body style="background:rgba(255,255,255,0.2);overflow-y:auto">
	<div class="container-fluid padding-0">
		<div class="row">
			<div class="col-md-6 myinfo right-content " >
				<h3 class="right-title"><span class="glyphicon glyphicon-list-alt"></span> 我的资料</h3>
				<form class="form-horizontal margin-T-20 user-info" >
					<fieldset disabled>
						<div class="form-group">
							<label for="my-phone" class="col-sm-2 control-label">手机号</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" id="my-phone" name="phoneNumber" placeholder="">
							</div>
						</div>
						<div class="form-group">
							<label for="my-mail" class="col-sm-2 control-label">邮箱</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" id="my-mail" name="phoneNumber" placeholder="">
							</div>
						</div>
						<div class="form-group">
							<label for="my-recommend" class="col-sm-2 control-label">推荐码</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" id="my-recommend" placeholder="">
							</div>
						</div>
						<div class="form-group">
							<label for="my-level" class="col-sm-2 control-label">身份级别</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" id="my-level" placeholder="">
							</div>
						</div>
						<div class="form-group">
							<label for="bank-number" class="col-sm-2 control-label">银行卡号</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" id="bank-number" placeholder="">
							</div>
						</div>
						<div class="form-group">
							<label for="active-time" class="col-sm-2 control-label">激活时间</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" id="active-time" placeholder="">
							</div>
						</div>
						<div class="form-group">
							<label for="my-card" class="col-sm-2 control-label">身份证</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" id="my-card" placeholder="">
							</div>
						</div>
					</fieldset>
					<div class="form-group">
						<div class="col-sm-offset-2 col-sm-10">
							<button type="button" class="btn btn-primary" id="edit-info">修改信息</button>
						</div>
					</div>
				</form>
			</div>
			<div class="col-md-6 edit-info right-content" >
				<h3  class="right-title"><span class="glyphicon glyphicon-pencil"></span> 完善或修改信息</h3>
				<form class="form-horizontal margin-T-20 user-info" id="edit-form">
						<div class="form-group">
							<label for="new-mail" class="col-sm-2 control-label">邮箱</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" id="new-mail" name="mail" placeholder="">
							</div>
						</div>
						<div class="form-group">
							<label for="new-bank-number" class="col-sm-2 control-label">银行卡号</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" id="new-bank-number" name="bankCardNumber" placeholder="">
							</div>
						</div>
						<div class="form-group">
							<label for="old-password" class="col-sm-2 control-label">原密码</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" id="old-password" name="oldPassword" placeholder="">
							</div>
						</div>
						<div class="form-group">
							<label for="new-password" class="col-sm-2 control-label">新密码</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" id="new-password" name="newPassword" placeholder="">
							</div>
						</div>
						<div class="form-group">
							<label for="new-password2" class="col-sm-2 control-label">再次输入新密码</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" id="new-password2" placeholder="">
							</div>
						</div>
						
						<div class="form-group">
							<label for="new-card" class="col-sm-2 control-label">身份证</label>
							<div class="col-sm-8">
								<input type="text" class="form-control" id="new-card" name="idCard" placeholder="">
							</div>
						</div>
					<div class="form-group">
						<div class="col-sm-offset-2 col-sm-10">
							<button type="button" class="btn btn-primary" id="confirm-edit">确认修改</button>
						</div>
					</div>
				</form>
		
			</div>
		</div>
	</div>
	<script src="./js/jquery-3.1.1.js"></script>
	
	<script src="./js/common.js"></script>
	<script>
		$(function(){
			$.ajax({
				url:"http://192.168.0.9:8080/wisdomlucky/user/findById",
				dataType:"json",
				type:"get",
				success:function(result){
					if(result.success == true){
						$("#my-phone").val(result.data.phoneNumber);
						$("#my-mail").val(result.data.mail);
						$("#my-level").val(result.data.type);
						$("#my-recommend").val(result.data.userCode);
						$("#active-time").val(result.data.time);
						$("#bank-number").val(result.data.bankCardNumber);
						$("#my-card").val(result.data.idCard);	
					}
				}
			});
			$("#edit-info").click(function(){
				$(".myinfo").hide(200);
				$(".edit-info").show(200);
			})
			$("#confirm-edit").click(function(){
				var formData = $("#edit-form").serializeArray();
				var postData = {};
				$.each(formData,function(e){
				 	postData[this.name] = this.value;
				})
				console.log(postData)
				$.ajax({
					type:"post",
					url:"http://192.168.0.9:8080/wisdomlucky/user/update",
					data:postData,
					dataType:"json",
					success:function(result){
						if(result.success == true){
							alert("修改成功");	
							$(".edit-info").hide(200);
							$("#my-mail").val(postData.mail);
							$("#bank-number").val(postData.bankCardNumber);
							$("#my-card").val(postData.idCard);	
						}
					}
				})
			})

		})
	</script>
</body>
</html>
